
{% assign tags = '' %}
{% for tag in site.tags %}
    {% capture tags %}{{ tags }}{% unless forloop.first %};{% endunless %}{{ tag[0] }},{{ tag[1] | size }},{% if page.tags contains tag[0] %}active{% else %}{% endif %}
{% endcapture %}
{% endfor %}
{% assign tags = tags | split:';' | sort  %}

<section>

    <nav role="navigation">
        {% for tag in tags %}
            {% assign t = tag | split:','  %}
            <a rel="bookmarks"
               data-tag="{{ t[0] | replace:' ','_' }}"
               tabindex="1"
               href="/tags#{{ t[0] }}"
               title="tag: {{ t[0] }}"><span {% unless page.layout-current == 'tags' %}id="{{ t[0] }}"{% endunless %}
                                             class="label {{ t[2] }}"><i class='icon-tag'></i> {{ t[0] }}{% unless t[1] == '1' %} ({{ t[1] }}){% endunless %}</span></a>
        {% endfor %}
    </nav>

    <script>
        $(function(){
            $(document.body).on( 'mouseover mouseout',
                                 'a[data-tag] > .label',
                                 function(e){ $('a[data-tag="'+$(this).parent().data('tag')+'"] > .label')
                                                 .toggleClass('hover', e.type == 'mouseover'); }
                                );
        });
    </script>
</section>
