---
    layout: html.default
---

{% assign posts  = '' %}
{% assign toc  = ',' %}
{% assign page-categories = page.categories | join:',' | append:',' | prepend:',' %}
{% assign post-date-year  = '' %}

{% for post in site.posts %}
    {% assign post-out-categories = page-categories %}
    {% for category in post.categories %}
        {% assign c = category | append:',' | prepend:',' %}
        {% assign post-out-categories = post-out-categories | replace:c,',' %}
    {% endfor %}
    {% if page.categories == empty or page-categories != post-out-categories %}
        {% assign post-date-year-prev = post-date-year %}
        {% assign post-date-year = post.date | date:'%Y' %}
        {% capture p %}
            {% if post-date-year != post-date-year-prev %}
                {% assign toc = toc | append:',' | append:post-date-year %}
                <h1 id="toc-{{ post-date-year }}">{{ post-date-year }}</h1>
            {% endif %}
            <article class="post">
                <time data-year="{{ post-date-year | replace:post-date-year-prev,'' }}"
                      datetime="{{ post.date }}"
                      datetime="{{ post.date }}"
                      pubdate ="{{ post.date }}"
                      title   ="{{ post.date }}">{{ post.date | date:'%b %d' }}</time>
                <h2><a class="title"
                       rel="bookmark"
                       href="{{ post.url }}"
                       title="{{ post.title }}">{{ post.title }}</a></h2>
                <nav role="navigation">
                    {% for category in post.categories %}
                        <a rel="category"
                           href="/{{ category }}"
                           title="category: {{ category }}"><span class="label label-inverse"><i class='icon-bookmark'></i> {{ category }}</span></a>
                    {% endfor %}
                    {% assign post-tags-sorted = post.tags | sort %}
                    {% for tag in post-tags-sorted %}
                        <a rel="tag"
                           data-tag="{{ tag }}"
                           href="/tags#{{ tag }}"
                           title="tag: {{ tag }}"><span class="label"><i class='icon-tag'></i> {{ tag }}</span></a>
                    {% endfor %}
                </nav>
            </article>
        {% endcapture %}
        {% assign posts = posts | append:p %}
    {% endif %}
{% endfor %}

<header class="jumbotron subhead" id="overview">
    <div class="container">
        <h1><i class="icon-category-{{ page.categories[0] }}"></i> <a href="{{ page.url }}" title="{{ page.title }}" rel="bookmark">{{ page.title }}</a></h1>
        <p class="lead">{{ page.description }}</p>
    </div>
</header>

<div class="container">
    <div class="row">
        <aside class="span3 bs-docs-sidebar">
            <ul class="nav nav-list bs-docs-sidenav" role="navigation">
                {% assign toc = toc | replace:',,','' | split:',' %}
                {% for t in toc %}
                    <li><a href="#toc-{{ t }}"><i class="icon-chevron-right"></i> {{ t }}</a></li>
                {% endfor %}
            </ul>
            
            {% include body.social.html %}
            {% include body.tags.html %}
            
        </aside>
        <div class="span9">
            <section id="main-content">

                {{ content }}
                {{ posts }}

            </section>
        </div>
    </div>
</div>
